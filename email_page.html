<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kurdish Advocacy Email</title>
</head>
<body>

<h3 id="status">Preparing your emailâ€¦</h3>

<script>
// Helper to read URL parameters
function getParam(name) {
  return new URLSearchParams(window.location.search).get(name);
}

function pick(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

// Define email batches (10 per batch)
const EMAILS = {
  // Senate batches
  senate_1: [
    "Connor_Lounsbury@alsobrooks.senate.gov",
    "kami_capener@hoeven.senate.gov",
    "press@baldwin.senate.gov",
    "jessica_mccune@banks.senate.gov",
    "press@barrasso.senate.gov",
    "press@bennet.senate.gov",
    "spencer_hurwitz@blackburn.senate.gov",
    "maria_mcelwain@blumenthal.senate.gov",
    "Sean_Ryan@bluntrochester.senate.gov",
    "jeff_giertz@booker.senate.gov"
  ],
  senate_2: [
    "Matthew_Wester@boozman.senate.gov",
    "Sean_Ross@britt.senate.gov",
    "Mike_Reynard@budd.senate.gov",
    "ansley_lacitis@cantwell.senate.gov",
    "kelley_moore@capito.senate.gov",
    "Joe_ramallo@cassidy.senate.gov",
    "Blake_Kernen@collins.senate.gov",
    "will_baskin-gerwitz@coons.senate.gov",
    "natalie_yezbick@cornyn.senate.gov",
    "lauren_wodarski@cortezmasto.senate.gov"
  ],
  // EU batches
  eu_1: [
    "mika.aaltola@europarl.europa.eu",
    "maravillas.abadiajover@europarl.europa.eu",
    "magdalena.adamowicz@europarl.europa.eu",
    "georgios.aftias@europarl.europa.eu",
    "oihane.agirregoitiamartinez@europarl.europa.eu",
    "peter.agius@europarl.europa.eu",
    "alex.agiussaliba@europarl.europa.eu",
    "galato.alexandraki@europarl.europa.eu",
    "gregory.allione@europarl.europa.eu",
    "abir.alsahlani@europarl.europa.eu"
  ],
  eu_2: [
    "nikolaos.anadiotis@europarl.europa.eu",
    "christine.anderson@europarl.europa.eu",
    "li.andersson@europarl.europa.eu",
    "rasmus.andresen@europarl.europa.eu",
    "barry.andrews@europarl.europa.eu",
    "mieke.andriese@europarl.europa.eu",
    "vytenis.andriukaitis@europarl.europa.eu",
    "mathilde.androuet@europarl.europa.eu",
    "marc.angel@europarl.europa.eu",
    "gerolf.annemans@europarl.europa.eu"
  ]
};

(function () {
  const batch = getParam("batch");
  const name  = getParam("name") || "";

  const recipients = EMAILS[batch];
  if (!recipients) {
    document.getElementById("status").innerText = "Invalid batch selected.";
    return;
  }

  // Subjects
  const SUBJECTS = [
    "Urgent Appeal: Do Not Abandon the Kurds of Syria",
    "Immediate Concern Regarding Kurdish Allies in Syria"
  ];

  // Body paragraphs
  const OPENING = [
    "I am writing to urgently draw your attention to the situation facing the Kurdish people in northeast Syria."
  ];
  const CONTEXT = [
    "Kurdish forces were among the most reliable and effective partners in the fight against ISIS."
  ];
  const BETRAYAL = [
    "Today, despite those sacrifices, Kurdish communities face abandonment."
  ];
  const CONSEQUENCE = [
    "History shows that abandoning the Kurds leads to long-term instability and moral failure."
  ];
  const CALL = [
    "I urge you to publicly speak out, support policies that ensure their protection, and hold decision-makers accountable."
  ];
  const CLOSING = [
    "Silence at this moment is not neutrality."
  ];

  // Compose body
  let body = "Dear Representative / Public Figure,\n\n" +
             pick(OPENING) + "\n\n" +
             pick(CONTEXT) + "\n\n" +
             pick(BETRAYAL) + "\n\n" +
             pick(CONSEQUENCE) + "\n\n" +
             pick(CALL) + "\n\n" +
             pick(CLOSING) + "\n";

  if (name) body += "\nSincerely,\n" + name;

  // Join recipients for BCC
  const bccList = recipients.join(",");

  // Create mailto URL
  const mailto = `mailto:?bcc=${encodeURIComponent(bccList)}&subject=${encodeURIComponent(pick(SUBJECTS))}&body=${encodeURIComponent(body)}`;

  // Redirect to default mail app
  window.location.href = mailto;
})();
</script>

</body>
</html>
