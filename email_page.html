<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kurds Advocacy Email</title>
</head>
<body>

<script>
/* -----------------------------
   Helpers
----------------------------- */
function getParam(name) {
  return new URL(window.location.href).searchParams.get(name);
}

function pick(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

/* -----------------------------
   Auto-send logic
----------------------------- */
function sendEmail() {
  const group = getParam("group");
  const name  = getParam("name") || "";

  /* -----------------------------
     Recipient groups
  ----------------------------- */
  const groups = {
    senate_1: "Connor_Lounsbury@alsobrooks.senate.gov,kami_capener@hoeven.senate.gov,press@baldwin.senate.gov,jessica_mccune@banks.senate.gov,press@barrasso.senate.gov,press@bennet.senate.gov,spencer_hurwitz@blackburn.senate.gov,maria_mcelwain@blumenthal.senate.gov,Sean_Ryan@bluntrochester.senate.gov,jeff_giertz@booker.senate.gov",
    senate_2: "press@brown.senate.gov,press@butler.senate.gov,press@cantwell.senate.gov,press@capito.senate.gov,press@cardin.senate.gov,press@carper.senate.gov,press@casey.senate.gov,press@cassidy.senate.gov,press@collins.senate.gov,press@coons.senate.gov"
  };

  const bcc = groups[group];
  if (!bcc) {
    document.body.innerHTML = "<h3>Invalid recipient group.</h3>";
    return;
  }

  /* -----------------------------
     Subject rotation
  ----------------------------- */
  const subjects = [
    "Urgent Appeal: Do Not Abandon the Kurds of Syria",
    "Protect Our Kurdish Allies in Syria",
    "Urgent Concern Regarding Kurdish Civilians",
    "Standing With the Kurds Is a Moral Imperative"
  ];

  /* -----------------------------
     Paragraph variants
  ----------------------------- */
  const intro = [
    "I am writing to urgently call your attention to the situation facing the Kurdish people in northeast Syria.",
    "This message is sent with deep concern regarding the growing danger confronting Kurdish communities in Syria.",
    "I wish to draw your immediate attention to the unfolding crisis affecting the Kurds of northeast Syria."
  ];

  const context = [
    "The Kurds were among the most effective partners in the fight against ISIS, sacrificing thousands of lives to defend global security and democratic values.",
    "During the campaign against ISIS, Kurdish forces stood on the front lines, bearing immense human costs in defense of shared principles.",
    "Few allies contributed more decisively to defeating ISIS than the Kurds, whose sacrifices benefited the international community."
  ];

  const risk = [
    "Today, those same partners face abandonment driven by short-term political convenience.",
    "Despite their sacrifices, the Kurds now face isolation and exposure to renewed violence.",
    "Alarmingly, trusted allies are now left vulnerable due to shifting political priorities."
  ];

  const appeal = [
    "I urge you to speak publicly, support policies that ensure their protection, and hold decision-makers accountable.",
    "Please use your voice and influence to advocate for concrete measures that guarantee their safety and dignity.",
    "I respectfully call on you to take a clear stand in defense of Kurdish civilians and their future."
  ];

  const closing = [
    "Silence at this moment is not neutrality.",
    "History will remember how this moment was met.",
    "Failure to act now risks repeating past moral failures."
  ];

  /* -----------------------------
     Build email body
  ----------------------------- */
  let body =
    "Dear Representative / Public Figure,\n\n" +
    pick(intro) + "\n\n" +
    pick(context) + "\n\n" +
    pick(risk) + "\n\n" +
    pick(appeal) + "\n\n" +
    pick(closing) + "\n";

  if (name) {
    body += "\nSincerely,\n" + name;
  }

  const mailto =
    "mailto:?bcc=" + encodeURIComponent(bcc) +
    "&subject=" + encodeURIComponent(pick(subjects)) +
    "&body=" + encodeURIComponent(body);

  window.location.href = mailto;
}

/* -----------------------------
   Run on load
----------------------------- */
sendEmail();
</script>

</body>
</html>
