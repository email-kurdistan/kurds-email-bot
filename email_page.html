<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Kurds Advocacy Email</title>
<style>
button { margin: 5px; padding: 8px 12px; font-size: 14px; }
</style>
</head>
<body>

<h2 id="title">Loadingâ€¦</h2>
<div id="batch-list"></div>
<div id="nav-buttons"></div>

<script>
// ----- Helper to read URL parameters -----
function getParam(name) {
    return new URLSearchParams(window.location.search).get(name);
}

// ----- Configuration: batches (example, expand as needed) -----
const BATCHES = {
    "senate": {
        "1": ["Connor_Lounsbury@alsobrooks.senate.gov","kami_capener@hoeven.senate.gov","press@baldwin.senate.gov","jessica_mccune@banks.senate.gov","press@barrasso.senate.gov","press@bennet.senate.gov","spencer_hurwitz@blackburn.senate.gov","maria_mcelwain@blumenthal.senate.gov","Sean_Ryan@bluntrochester.senate.gov","jeff_giertz@booker.senate.gov"],
        "2": ["press@brown.senate.gov","press@butler.senate.gov","press@cantwell.senate.gov","press@capito.senate.gov","press@cardin.senate.gov","press@carper.senate.gov","press@casey.senate.gov","press@cassidy.senate.gov","press@collins.senate.gov","press@coons.senate.gov"]
        // add more Senate batches...
    },
    "eu": {
        "1": ["mika.aaltola@europarl.europa.eu","maravillas.abadiajover@europarl.europa.eu","magdalena.adamowicz@europarl.europa.eu","georgios.aftias@europarl.europa.eu","oihane.agirregoitiamartinez@europarl.europa.eu","peter.agius@europarl.europa.eu","alex.agiussaliba@europarl.europa.eu","galato.alexandraki@europarl.europa.eu","gregory.allione@europarl.europa.eu","abir.alsahlani@europarl.europa.eu"]
        // add more EU batches up to 74
    }
};

const GROUPS = {
    "senate": "ðŸ‡ºðŸ‡¸ US Senators",
    "eu": "ðŸ‡ªðŸ‡º EU Parliament"
};

const PER_PAGE = 10;

// ----- State -----
let currentGroup = getParam("group") || "senate";
let userName = getParam("name") || "";
let currentPage = 0;

// ----- Render function -----
function renderPage() {
    const batches = Object.keys(BATCHES[currentGroup]);
    const startIndex = currentPage * PER_PAGE;
    const endIndex = startIndex + PER_PAGE;
    const visible = batches.slice(startIndex, endIndex);

    // Title
    document.getElementById("title").textContent = `Showing ${GROUPS[currentGroup]} Batches ${startIndex+1} to ${Math.min(endIndex,batches.length)}`;

    // Batch buttons
    const batchDiv = document.getElementById("batch-list");
    batchDiv.innerHTML = "";
    visible.forEach(batch => {
        const btn = document.createElement("button");
        btn.textContent = `Batch ${batch}`;
        btn.onclick = () => {
            const recipients = BATCHES[currentGroup][batch].join(",");
            const subject = encodeURIComponent("Urgent Appeal: Support the Kurds");
            const body = encodeURIComponent(`Dear Representative,\n\nI urge you to support the Kurdish cause.\n\nSincerely,\n${userName}`);
            window.location.href = `mailto:?to=${recipients}&subject=${subject}&body=${body}`;
        };
        batchDiv.appendChild(btn);
    });

    // Navigation buttons
    const navDiv = document.getElementById("nav-buttons");
    navDiv.innerHTML = "";

    if(startIndex > 0){
        const prev = document.createElement("button");
        prev.textContent = "â¬… Previous";
        prev.onclick = () => { currentPage--; renderPage(); };
        navDiv.appendChild(prev);
    }
    if(endIndex < batches.length){
        const next = document.createElement("button");
        next.textContent = "Next âž¡";
        next.onclick = () => { currentPage++; renderPage(); };
        navDiv.appendChild(next);
    }

    const back = document.createElement("button");
    back.textContent = "ðŸ  Back to Group Selection";
    back.onclick = () => { window.location.href = window.location.pathname; };
    navDiv.appendChild(back);
}

// Initial render
renderPage();
</script>

</body>
</html>
