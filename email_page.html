<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Email Advocacy</title>
</head>
<body>

<script>
/* -----------------------------
   Utility
----------------------------- */
function getParam(name) {
  return new URLSearchParams(window.location.search).get(name);
}

function pick(arr) {
  return arr[Math.floor(Math.random() * arr.length)];
}

/* -----------------------------
   Inputs
----------------------------- */
const group = getParam("group");
const name  = getParam("name") || "";

/* -----------------------------
   Recipient groups
----------------------------- */
const groups = {
  senate_1: "Connor_Lounsbury@alsobrooks.senate.gov,kami_capener@hoeven.senate.gov,press@baldwin.senate.gov",
  senate_2: "press@brown.senate.gov,press@cantwell.senate.gov,press@collins.senate.gov"
};

if (!group || !groups[group]) {
  document.body.innerHTML = "<h2>Invalid or missing recipient group.</h2>";
  throw new Error("Invalid group");
}

/* -----------------------------
   Subject rotation
----------------------------- */
const subjects = [
  "Urgent Appeal: Protect the Kurds of Syria",
  "Do Not Abandon Our Kurdish Allies",
  "Urgent Concern Regarding Kurdish Civilians in Syria",
  "Standing With the Kurds: A Moral Imperative"
];

/* -----------------------------
   Paragraph pools
----------------------------- */
const introVariants = [
  "I am writing to express urgent concern regarding the situation facing the Kurdish people in northeast Syria.",
  "This message is sent with deep concern over the escalating risks confronting Kurdish communities in Syria.",
  "I wish to draw your immediate attention to the unfolding crisis affecting the Kurds in northeast Syria."
];

const contextVariants = [
  "Kurdish forces were among the most effective partners in the fight against ISIS, sacrificing thousands of lives to protect global security.",
  "During the campaign against ISIS, Kurdish fighters stood on the front lines, bearing immense human costs in defense of shared values.",
  "Few allies contributed more decisively to defeating ISIS than the Kurds, whose sacrifices benefited the international community."
];

const riskVariants = [
  "Today, those same partners face abandonment driven by short-term political considerations.",
  "Despite their sacrifices, the Kurds now face isolation and exposure to renewed violence.",
  "Alarmingly, trusted allies are now left vulnerable to instability and attack."
];

const appealVariants = [
  "I urge you to speak publicly, support concrete protective measures, and ensure accountability in policy decisions.",
  "Please use your voice and influence to advocate for policies that guarantee their safety and dignity.",
  "I respectfully call on you to take a clear stand in defense of Kurdish civilians and their future."
];

const closingVariants = [
  "Silence at this moment is not neutrality.",
  "History will remember how this moment was met.",
  "Failure to act now risks repeating past moral failures."
];

/* -----------------------------
   Build email
----------------------------- */
const subject = pick(subjects);

let body =
  `Dear Representative / Public Figure,\n\n` +
  pick(introVariants) + "\n\n" +
  pick(contextVariants) + "\n\n" +
  pick(riskVariants) + "\n\n" +
  pick(appealVariants) + "\n\n" +
  pick(closingVariants) + "\n";

if (name) {
  body += `\nSincerely,\n${name}`;
}

/* -----------------------------
   Launch mail client
----------------------------- */
const mailto =
  "mailto:" + encodeURIComponent(groups[group]) +
  "?subject=" + encodeURIComponent(subject) +
  "&body=" + encodeURIComponent(body);

window.location.href = mailto;
</script>

</body>
</html>
